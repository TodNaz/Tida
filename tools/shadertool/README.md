Tida Shader Tool
---
TST (Tida Shader Tool) - инструмент для оптимизации шейдеров. Компилирует шейдеры GLSL/HLSL (с помощью glslc),
выявляет информацию о семплерах, юниформ/констант блоков и записывает в бинарный блок в файл с расширением .tso.

Tida поддерживает загрузку Spir-V код, однако, когда он его загружает, ему нужно ещё доп. время на трансляцию
Spir-V в нативный код для бекенда (если требуется), выявляет информацию о блоках (чтобы их создать).

Tida распознает тип tos по сигнатуре [.TIDASO\0].

# Зависимости.
Для работы требуется, чтобы в одном папке с программой tsc были программы:
1) [glslangValidator](https://github.com/google/shaderc).
2) [dxc](https://github.com/microsoft/DirectXShaderCompiler).
3) [spirv-cross-c-shared](https://github.com/KhronosGroup/SPIRV-Tools)

# Как работает.
tsc [шейдер GLSL (.glsl/.vert/.frag/.comp) | шейдер HLSL (.hlsl/.hvert/.hfrag/.hcomp)]
    [--shaderstage {vertex | fragment | compute}]   Указывает стадию шейдера (если неопределно в расширении файла).
    [--shadertype {glsl | hlsl | auto}]             Указывает язык шейдера (если неопределено в расширении файла).
    [-o | --output <file>]                          Указывает, куда сувать блоб.
    [-g]                                            Генерирует отладочную информацию.

# Формат шейдера.
Файл указывается в расширении .tso (Tida Shader Object).
Содержать оно должно в байтах следущее:
1) Сигнатура (8 байт) [CONST-STRING]
2) Размер шейдера Spir-V (4 байт) [UNSIGNED-INT]
3) Размер шейдера DXIL (4 байт) [UNSIGNED-INT]
4) Размер блока информации о шейдере (4 байт) [UNSIGNED-INT]
5) Шейдер Spir-V (N2 байт) [BLOB]
6) Шейдер DXIL (N3 байт) [BLOB]
7) Информация о шейдере (N4 байт) [BLOB]

Блоки в информации о шейдере:
1) Тип (3 байта) [CONST-STRING] (допустимые значения: UNI,SMP)
2) Данные блоба (N1 байт) [...]

В блоках UNI находится следующая информация:
1) Точка привязки (2 байта) [UNSIGNED-SHORT]
2) Размер блока (с учётом смещений) (4 байта) [UNSIGNED-INT]

В блоках SMP находится следующая информация:
1) Точка привязки (2 байта) [UNSIGNED-SHORT]
2) Тип сэмплера (1 байт) [UNSIGNED-BYTE] (допустимые значения: 1, 2, 3)

# Ньюансы.
В шейдере недопустимы `pushconstant` синематика для обеспечения совместимости с OpenGL 4.2 - 4.6. 
На данный момент блоки SMP не генерируются из-за ненадобности.